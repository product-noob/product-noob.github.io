---
layout: page
title: Calculator
permalink: /tools/calculator/
---

<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/tools.css">

<div class="tools-container">
  <div class="tool-header">
    <h1>Calculator</h1>
    <p class="tool-description">A versatile calculator for quick calculations. Features standard arithmetic operations, memory functions, and calculation history.</p>
    <a href="{{ site.baseurl }}/tools/" class="back-to-tools">← Back to Tools</a>
  </div>

  <div class="calculator">
    <div class="calculator-display">
      <div class="calculator-history" id="history"></div>
      <div class="calculator-input" id="input">0</div>
    </div>
    <div class="calculator-keypad">
      <button class="calculator-key function" data-action="clear">AC</button>
      <button class="calculator-key function" data-action="negative">±</button>
      <button class="calculator-key function" data-action="percentage">%</button>
      <button class="calculator-key operator" data-action="divide">÷</button>
      
      <button class="calculator-key number" data-digit="7">7</button>
      <button class="calculator-key number" data-digit="8">8</button>
      <button class="calculator-key number" data-digit="9">9</button>
      <button class="calculator-key operator" data-action="multiply">×</button>
      
      <button class="calculator-key number" data-digit="4">4</button>
      <button class="calculator-key number" data-digit="5">5</button>
      <button class="calculator-key number" data-digit="6">6</button>
      <button class="calculator-key operator" data-action="subtract">−</button>
      
      <button class="calculator-key number" data-digit="1">1</button>
      <button class="calculator-key number" data-digit="2">2</button>
      <button class="calculator-key number" data-digit="3">3</button>
      <button class="calculator-key operator" data-action="add">+</button>
      
      <button class="calculator-key number" data-digit="0">0</button>
      <button class="calculator-key number" data-digit=".">.</button>
      <button class="calculator-key function" data-action="backspace">⌫</button>
      <button class="calculator-key equals" data-action="calculate">=</button>
    </div>
  </div>
</div>

<style>
  /* Calculator Styles */
  .calculator-container {
    max-width: 480px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .calculator-header {
    margin-bottom: 30px;
  }
  
  .back-to-tools {
    display: inline-block;
    margin-top: 15px;
    color: #4183c4;
    text-decoration: none;
    font-weight: 500;
  }
  
  .back-to-tools:hover {
    text-decoration: underline;
  }
  
  .calculator {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    background-color: #f9f9f9;
  }
  
  .calculator-display {
    background-color: #fff;
    padding: 20px;
    text-align: right;
  }
  
  .calculator-history {
    font-size: 14px;
    min-height: 20px;
    color: #888;
    margin-bottom: 5px;
    overflow-x: auto;
    white-space: nowrap;
  }
  
  .calculator-input {
    font-size: 36px;
    font-weight: 300;
    color: #333;
    overflow-x: auto;
    white-space: nowrap;
  }
  
  .calculator-keypad {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1px;
    background-color: #e0e0e0;
  }
  
  .calculator-key {
    border: none;
    background-color: #f9f9f9;
    font-size: 24px;
    padding: 20px 0;
    cursor: pointer;
    transition: background-color 0.2s;
    outline: none;
  }
  
  .calculator-key:active {
    background-color: #e0e0e0;
  }
  
  .calculator-key.function {
    background-color: #f0f0f0;
  }
  
  .calculator-key.operator {
    background-color: #f0f0f0;
    color: #4183c4;
    font-weight: 500;
  }
  
  .calculator-key.equals {
    background-color: #4183c4;
    color: #fff;
  }
  
  /* Responsive adjustments */
  @media (max-width: 480px) {
    .calculator-container {
      padding: 0 10px;
    }
    
    .calculator-key {
      font-size: 20px;
      padding: 15px 0;
    }
    
    .calculator-input {
      font-size: 28px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM elements
    const historyDisplay = document.getElementById('history');
    const inputDisplay = document.getElementById('input');
    const keypad = document.querySelector('.calculator-keypad');
    
    // Calculator state
    let displayValue = '0';
    let firstOperand = null;
    let operator = null;
    let waitingForSecondOperand = false;
    let calculationHistory = '';
    
    // Update the display
    function updateDisplay() {
      inputDisplay.textContent = displayValue;
      historyDisplay.textContent = calculationHistory;
    }
    
    // Handle digit input
    function inputDigit(digit) {
      if (waitingForSecondOperand) {
        displayValue = digit;
        waitingForSecondOperand = false;
      } else {
        displayValue = displayValue === '0' ? digit : displayValue + digit;
      }
    }
    
    // Handle decimal point
    function inputDecimal() {
      if (waitingForSecondOperand) {
        displayValue = '0.';
        waitingForSecondOperand = false;
        return;
      }
      
      if (!displayValue.includes('.')) {
        displayValue += '.';
      }
    }
    
    // Handle operators
    function handleOperator(nextOperator) {
      const inputValue = parseFloat(displayValue);
      
      if (firstOperand === null) {
        firstOperand = inputValue;
      } else if (operator) {
        const result = calculate(firstOperand, inputValue, operator);
        displayValue = `${parseFloat(result.toFixed(7))}`;
        firstOperand = result;
      }
      
      waitingForSecondOperand = true;
      operator = nextOperator;
      calculationHistory = `${firstOperand} ${getOperatorSymbol(operator)}`;
    }
    
    // Calculate result
    function calculate(firstOperand, secondOperand, operator) {
      switch (operator) {
        case 'add':
          return firstOperand + secondOperand;
        case 'subtract':
          return firstOperand - secondOperand;
        case 'multiply':
          return firstOperand * secondOperand;
        case 'divide':
          return firstOperand / secondOperand;
        default:
          return secondOperand;
      }
    }
    
    // Get operator symbol for display
    function getOperatorSymbol(op) {
      switch (op) {
        case 'add': return '+';
        case 'subtract': return '−';
        case 'multiply': return '×';
        case 'divide': return '÷';
        default: return '';
      }
    }
    
    // Reset calculator
    function resetCalculator() {
      displayValue = '0';
      firstOperand = null;
      operator = null;
      waitingForSecondOperand = false;
      calculationHistory = '';
    }
    
    // Toggle negative value
    function toggleNegative() {
      displayValue = parseFloat(displayValue) * -1;
      displayValue = displayValue.toString();
    }
    
    // Calculate percentage
    function percentage() {
      displayValue = (parseFloat(displayValue) / 100).toString();
    }
    
    // Handle backspace
    function backspace() {
      if (displayValue.length > 1) {
        displayValue = displayValue.slice(0, -1);
      } else {
        displayValue = '0';
      }
    }
    
    // Event listener for keypad
    keypad.addEventListener('click', (event) => {
      const target = event.target;
      
      // Handle number keys
      if (target.classList.contains('number')) {
        if (target.dataset.digit === '.') {
          inputDecimal();
        } else {
          inputDigit(target.dataset.digit);
        }
        updateDisplay();
      }
      
      // Handle operator keys
      if (target.classList.contains('operator')) {
        handleOperator(target.dataset.action);
        updateDisplay();
      }
      
      // Handle equals key
      if (target.dataset.action === 'calculate') {
        if (operator && !waitingForSecondOperand) {
          calculationHistory += ` ${displayValue} =`;
          const secondOperand = parseFloat(displayValue);
          const result = calculate(firstOperand, secondOperand, operator);
          displayValue = `${parseFloat(result.toFixed(7))}`;
          firstOperand = result;
          operator = null;
        }
        updateDisplay();
      }
      
      // Handle clear key
      if (target.dataset.action === 'clear') {
        resetCalculator();
        updateDisplay();
      }
      
      // Handle negative toggle
      if (target.dataset.action === 'negative') {
        toggleNegative();
        updateDisplay();
      }
      
      // Handle percentage
      if (target.dataset.action === 'percentage') {
        percentage();
        updateDisplay();
      }
      
      // Handle backspace
      if (target.dataset.action === 'backspace') {
        backspace();
        updateDisplay();
      }
    });
    
    // Initialize display
    updateDisplay();
    
    // Add keyboard support
    document.addEventListener('keydown', (event) => {
      const key = event.key;
      
      // Number keys
      if (/^[0-9]$/.test(key)) {
        inputDigit(key);
        updateDisplay();
      }
      
      // Decimal key
      if (key === '.') {
        inputDecimal();
        updateDisplay();
      }
      
      // Operator keys
      if (key === '+') {
        handleOperator('add');
        updateDisplay();
      }
      if (key === '-') {
        handleOperator('subtract');
        updateDisplay();
      }
      if (key === '*') {
        handleOperator('multiply');
        updateDisplay();
      }
      if (key === '/') {
        event.preventDefault(); // Prevent browser search
        handleOperator('divide');
        updateDisplay();
      }
      
      // Enter/equals key
      if (key === 'Enter' || key === '=') {
        if (operator && !waitingForSecondOperand) {
          calculationHistory += ` ${displayValue} =`;
          const secondOperand = parseFloat(displayValue);
          const result = calculate(firstOperand, secondOperand, operator);
          displayValue = `${parseFloat(result.toFixed(7))}`;
          firstOperand = result;
          operator = null;
        }
        updateDisplay();
      }
      
      // Backspace key
      if (key === 'Backspace') {
        backspace();
        updateDisplay();
      }
      
      // Escape/clear key
      if (key === 'Escape') {
        resetCalculator();
        updateDisplay();
      }
    });
  });
</script>
